<meta>
<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">

<!-- CSS Reset -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">

<!-- Milligram CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">

<!-- You should properly set the path from the main file. -->
</meta>


<!doctype html>
<html lang="en">
  <head>
    <title>Community Resources</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   
  </head>
  <body>
    <h1><center>Add a new Resource</center></h1><br>

    <center>
      <form action = "http://localhost:5000" method = "POST" id="form1">
         <input type ="text" id= "resourceName" name ="resourceName" placeholder="Resource Name"><br>
         <br>
         <fieldset>
           <legend>Select Relevant Categories</legend>
            <div>
              <label for="clothing">
              <input type="checkbox" id="clothing" name="clothing"> Clothing
              </label>
            </div>
            <div>
              <label for="dental">
              <input type="checkbox" id="dental" name="dental"> Dental
            </label>
            </div>
            <div>
              <label for="disabilities">
              <input type="checkbox" id="disabilities" name="disabilities"> Disabilities
              </label><br>
            </div>
            <div>
              <label for="education">
              <input type="checkbox" id="education" name="education"> Education
              </label><br>
            </div>
            <div>
              <label for="elderly">
              <input type="checkbox" id="elderly" name="elderly"> Elderly
              </label><br>
            </div>
            <div>
              <label for="exOffenders">
              <input type="checkbox" id="exOffenders" name="exOffenders"> Ex-Offenders
              </label><br>
            </div>
            <div>
              <label for="financialAssistance">
              <input type="checkbox" id="financialAssistance" name="financialAssistance"> Financial Assistance
              </label><br>
            </div>
            <div>
              <label for="food">
              <input type="checkbox" id="food" name="food"> Food
              </label><br>
            </div>
            <div>
              <label for="furniture">
              <input type="checkbox" id="furniture" name="furniture"> Furniture
              </label><br>
            </div>
            <div>
              <label for="housingShelter">
              <input type="checkbox" id="housingShelter" name="housingShelter"> Housing/Shelter
              </label><br>
            </div>
            <div>
              <label for="healthServices">
              <input type="checkbox" id="healthServices" name="healthServices"> Health Services
              </label><br>
            </div>
            <div>
              <label for="legalServices">
              <input type="checkbox" id="legalServices" name="legalServices"> Legal Services
              </label><br>
            </div>
            <div>
              <label for="meals">
              <input type="checkbox" id="meals" name="meals"> Meals
              </label><br>
            </div>
            <div>
              <label for="medicalClinics">
              <input type="checkbox" id="medicalClinics" name="medicalClinics"> Medical Clinics
              </label><br>
            </div>
            <div>
              <label for="mentalHealthServices">
              <input type="checkbox" id="mentalHealthServices" name="mentalHealthServices"> Mental Health Services
              </label><br>
            </div>
            <div>
              <label for="parenting">
              <input type="checkbox" id="parenting" name="parenting"> Parenting
              </label><br>
            </div>
            <div>
              <label for="State">
              <input type="checkbox" id="State" name="State"> State
              </label><br>
            </div>
            <div>
              <label for="substanceAbuse">
              <input type="checkbox" id="substanceAbuse" name="substanceAbuse"> Substance Abuse
              </label><br>
            </div>
            <div>
              <label for="transportation">
              <input type="checkbox" id="transportation" name="transportation"> Transportation
              </label><br>
            </div>
            <div>
              <label for="veterans">
              <input type="checkbox" id="veterans" name="veterans"> Veterans
              </label><br>
            </div>
            <div>
              <label for="youth">
              <input type="checkbox" id="youth" name="youth"> Youth
              </label><br>
            </div>
            <br>
            
         </fieldset>
         <br>
         <input type ="text" id= "county" name = "county" placeholder="County"><br>
         <br>
         <input type ="text" id= "city" name = "city" placeholder="City"><br>
         <br> 
         <input type ="text" id= "streetAddress" name = "streetAddress" placeholder="Street Address"><br>
         <br>
         <input type ="text" id= "website" name = "website" placeholder="Website"><br>
         <br>
         <input type ="tel" id= "phoneNumber" name = "phoneNumber" placeholder="Phone Number"><br>
         <br>
         <input type ="text" id= "information" name = "information" placeholder="Description"><br>
         <br>
         <button type = "submit" form = "form1" value = "Submit" >Submit</button><br>
      </form><br>
    </center>

    
    <!-- Optional JavaScript -->
      <script src="index.js"></script>
      <script>

      //get reference in js to form
      const form1 = document.getElementById('form1');

      //listen for form submit event
      form1.addEventListener('submit', e => {
        
        //when that event happens prevent default behaviour and get Form Data from form
        e.preventDefault();
        const formData = new FormData(form1);

        let dataToSubmit = {};
        let checkedBoxes = [];

        //iterate through each key value pair in the form data
        formData.forEach((value, key) => {

          //if the value of the input is 'on' assume it's a checkbox and add to array
          if (value === 'on') {
            checkedBoxes.push(key);
          }
          else {
            dataToSubmit[key] = value;
          }
        });

        //add checked boxes to submission object
        dataToSubmit.resourceCategory = checkedBoxes;

        //submit or here we just log
        console.log(dataToSubmit);

        fetch('http://localhost:5000', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(dataToSubmit),
        })
        .then(res => res.json())
        .then(dataToSubmit => {
          console.log('Success:', dataToSubmit);
        })
        .catch((error) => {
          console.error('Error:', error);
        })
        
      });

      
      
      
      </script>
      

  </body>
</html>